<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>AgentFlow Framework Dashboard</title>
  <link rel="stylesheet" href="/static/style.css" />
</head>
<body>
  <header>
    <div class="logo">AgentFlow<span>Framework</span></div>
    <nav>
      <button class="nav-btn active" data-tab="dashboard">Dashboard</button>
      <button class="nav-btn" data-tab="run-agent">Run Agent</button>
      <button class="nav-btn" data-tab="workflows">Workflows</button>
      <button class="nav-btn" data-tab="tools">Tools</button>
      <button class="nav-btn" data-tab="approvals">Approvals</button>
    </nav>
    <div class="status-indicator" id="health-status">
      <span class="dot"></span> Connecting...
    </div>
  </header>

  <main>
    <!-- Dashboard Tab -->
    <section id="tab-dashboard" class="tab active">
      <h2>System Overview</h2>
      <div class="stats-grid">
        <div class="stat-card" id="stat-model">
          <div class="stat-label">Active Model</div>
          <div class="stat-value">-</div>
        </div>
        <div class="stat-card" id="stat-provider">
          <div class="stat-label">Provider</div>
          <div class="stat-value">-</div>
        </div>
        <div class="stat-card" id="stat-tools">
          <div class="stat-label">Registered Tools</div>
          <div class="stat-value">-</div>
        </div>
        <div class="stat-card" id="stat-agents">
          <div class="stat-label">Registered Agents</div>
          <div class="stat-value">-</div>
        </div>
      </div>
      <div class="card">
        <h3>Activity Log</h3>
        <div id="activity-log" class="log-container">Waiting for activity...</div>
      </div>
    </section>

    <!-- Run Agent Tab -->
    <section id="tab-run-agent" class="tab">
      <h2>Run Agent Task</h2>
      <div class="card">
        <div class="form-group">
          <label>Task Description</label>
          <textarea id="task-input" rows="5" placeholder="Enter task for the supervisor agent...">Process invoice INV-2024-001 from Acme Supplies for $4500. Validate PO, check duplicates, and provide triage report.</textarea>
        </div>
        <div class="form-group">
          <label>Context (JSON, optional)</label>
          <textarea id="context-input" rows="3" placeholder='{"key": "value"}'>{}</textarea>
        </div>
        <button class="btn btn-primary" id="run-btn">Run Agent</button>
        <button class="btn btn-secondary" id="clear-btn">Clear</button>
      </div>
      <div class="card" id="result-card" style="display:none">
        <h3>Result</h3>
        <div class="result-meta">
          <span id="result-agent"></span>
          <span id="result-time"></span>
        </div>
        <div id="result-output" class="result-box"></div>
      </div>
    </section>

    <!-- Workflows Tab -->
    <section id="tab-workflows" class="tab">
      <h2>Workflows</h2>
      <div class="card">
        <div class="form-group">
          <label>Workflow Name</label>
          <select id="workflow-select"><option value="finance_ap">finance_ap</option></select>
        </div>
        <div class="form-group">
          <label>Inputs (JSON)</label>
          <textarea id="workflow-inputs" rows="8">{
  "invoice_id": "INV-2024-001",
  "vendor_name": "Acme Supplies Co.",
  "invoice_amount": 4500.00,
  "po_number": "PO-2024-100",
  "invoice_date": "2024-01-15"
}</textarea>
        </div>
        <button class="btn btn-primary" id="run-workflow-btn">Execute Workflow</button>
      </div>
      <div class="card" id="workflow-result-card" style="display:none">
        <h3>Workflow Result</h3>
        <div id="workflow-result-output" class="result-box"></div>
      </div>
    </section>

    <!-- Tools Tab -->
    <section id="tab-tools" class="tab">
      <h2>Registered Tools</h2>
      <div id="tools-grid" class="tools-grid">Loading tools...</div>
      <div class="card">
        <h3>Test Tool</h3>
        <div class="form-group">
          <label>Tool Name</label>
          <input type="text" id="tool-name-input" placeholder="tool_name" />
        </div>
        <div class="form-group">
          <label>Arguments (JSON)</label>
          <textarea id="tool-args-input" rows="3">{}</textarea>
        </div>
        <button class="btn btn-primary" id="execute-tool-btn">Execute Tool</button>
        <div id="tool-result" class="result-box" style="margin-top:1rem; display:none"></div>
      </div>
    </section>

    <!-- Approvals Tab -->
    <section id="tab-approvals" class="tab">
      <h2>Pending Approvals</h2>
      <div class="card">
        <button class="btn btn-secondary" id="refresh-approvals-btn">Refresh</button>
        <div id="approvals-list" style="margin-top:1rem">No pending approvals.</div>
      </div>
    </section>
  </main>

  <script src="/static/app.js"></script>
</body>
</html>
